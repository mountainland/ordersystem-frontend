{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
<h2>{{url}}</h2>
<style>
    .center {text-align: center;align-self: center;}
</style>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script type="text/javascript">
    function showDiv(select){
    {% for payment_method in Payment_method %}
       if(select.value=="{{payment_method}}"){
            {% for payment in Payment_method %}
            document.getElementById('{{payment_method}}_div').style.display="none";
            {% endfor %}
            document.getElementById('{{payment_method}}_div').style.display = "block";
       }
    {% endfor %}
    } 
    function cityt(select){
        if (select.value=="Helsinki"){
            document.getElementById('Helsinki').style.display = "block";
            document.getElementById('Espoo').style.display = "none";
            document.getElementById('Vantaa').style.display = "none";
            document.getElementById('Kauniainen').style.display = "none";
        } else if (select.value=="Espoo"){
            document.getElementById('Helsinki').style.display = "none";
            document.getElementById('Espoo').style.display = "block";
            document.getElementById('Vantaa').style.display = "none";
            document.getElementById('Kauniainen').style.display = "none";
        } else if (select.value=="Vantaa"){
            document.getElementById('Helsinki').style.display = "none";
            document.getElementById('Espoo').style.display = "none";
            document.getElementById('Vantaa').style.display = "block";
            document.getElementById('Kauniainen').style.display = "none";
        } else if (select.value=="Kauniainen"){
            document.getElementById('Helsinki').style.display = "none";
            document.getElementById('Espoo').style.display = "none";
            document.getElementById('Vantaa').style.display = "none";
            document.getElementById('Kauniainen').style.display = "block";
        }
    }
</script>

<div class="container">
    <div class="row">
        <div class="col-12">

            <h2 class="center">Tilauslomake - Mountainland kotiinkuljetuspalvelu</h2>
            <form method="post">
            {% csrf_token %}
            <!-- MÄÄRÄ -->
            <label for="id_count_1" class="control-label requiredField">{{product_1.name|lower}} määrä<span class="asteriskField">*</span></label>
            <input type="number" name="count_1" value="0" class="form-control numberinput" onchange="calculateStuff();" min="0" max="1000" required id="id_count_1" pattern="\d*">
            <p> Hinta {{product_1.price}}€</p>
            <label for="id_count_2" class="control-label requiredField">{{product_2.name|lower}} määrä<span class="asteriskField">*</span></label>
            <input type="number" name="count_2" value="0" class="form-control numberinput" onchange="calculateStuff();" min="0" max="1000" required id="id_count_2" pattern="\d*">
            <p> Hinta {{product_2.price}}€</p>
            <label for="id_count_3" class="control-label requiredField">{{product_3.name|lower}} määrä<span class="asteriskField">*</span></label>
            <input type="number" name="count_3" value="0" class="form-control numberinput" onchange="calculateStuff();" min="0" max="1000" required id="id_count_3" pattern="\d*">
            <p> Hinta {{product_3.price}}€</p>
            <!-- TILAAJAN NIMI -->
            <label for="id_name" class="control-label requiredField">Tilaajan nimi<span class="asteriskField">*</span></label> 
            <input type="text" name="name" maxlength="255" class="form-control textinput textInput" required id="id_name">
            <!-- PUHELINNUMERO -->
            <label for="id_contact" class="control-label requiredField">Puhelinnumero<span class="asteriskField">*</span></label>
            <input type="text" name="contact" maxlength="10" class="form-control textinput textInput" required id="id_contact">
            
            <!-- OSOITE -->
            <label for="id_address" class="control-label requiredField">Osoite<span class="asteriskField">*</span></label>
            <input name="address" class="form-control textarea" required id="id_address"></input>
            
            <!-- POSTINUMERO -->
            <label for="id_postcode" class="control-label requiredField">Postinumero<span class="asteriskField">*</span></label>
            <input type="number" name="postcode" value="00500" class="form-control numberinput"  minlength="5"maxlenght="5" required id="id_postcode" pattern="\d*">
                        
            <!-- KAUPUNKI -->
            <label for="id_city" class="control-label requiredField">Kaupunki<span class="asteriskField">*</span></label>
            <select name="city" id="id_city" class="form-control dropdown" onchange="cityt(this)">
                <option value="" selected disabled hidden>Valitse kaupunki</option>
                <option value="Helsinki">Helsinki</option>
                <option value="Espoo">Espoo</option>
                <option value="Vantaa">Vantaa</option>
                <option value="Kauniainen">Kauniainen</option>
            </select>
            <!-- MAKSUTAPA -->
            <label for="id_payment_method" class="control-label requiredField">Maksutapa<span class="asteriskField">*</span></label>
            <select name="payment_method" id="id_payment_method" class="form-control dropdown" onchange="showDiv(this)">
                <option value="" selected disabled hidden>Valitse</option>
                {% for payment_method in Payment_method %}
                <option value="{{payment_method}}">{{payment_method}}</option>
                {% endfor %}
            </select>

            <label for="id_information" class="control-label">Lisätiedot</label>
            <input name="information" id="id_information" class="form-control textarea" id="id_information">
            <br>
            
            <button type="submit" class="btn btn-primary  btn-lg btn-block">Tilaa</button>
            </form>
            <!-- MAKSUTAVAT -->
            {% for payment_method in Payment_method %}
            <div id="{{payment_method}}_div" class="w3-panel w3-yellow" style="display:none;">{{payment_method.info}}</div>
            {% endfor %}

            <!-- KAUPUNGIT -->
            <div id="Helsinki" class="w3-panel w3-blue" style="display:none;">Helsingissä ruoat toimitetaan PP.KK kello HH.MM-HH.MM</div>
            <div id="Espoo" class="w3-panel w3-blue" style="display:none;">Espoossa ruoat toimitetaan PP.KK kello HH.MM-HH.MM</div>
            <div id="Vantaa" class="w3-panel w3-blue" style="display:none;">Vantaa ruoat toimitetaan PP.KK kello HH.MM-HH.MM</div>
            <div id="Kauniainen" class="w3-panel w3-blue" style="display:none;">Kauniainen ruoat toimitetaan PP.KK kello HH.MM-HH.MM</div>
            <p>Summa: </p>
            <p id="sum"></p>
        </div>
    </div>
</div>
<script type="text/javascript">    
    function calculateStuff(){
    document.getElementById("sum").innerHTML = ((document.getElementById("id_count_1").value * {{ product_1.price }}) + (document.getElementById("id_count_2").value * {{ product_2.price }}) + (document.getElementById("id_count_3").value * {{ product_3.price }}));
}
document.getElementById("sum").innerHTML = ((document.getElementById("id_count_1").value * {{ product_1.price }}) + (document.getElementById("id_count_2").value * {{ product_2.price }}) + (document.getElementById("id_count_3").value * {{ product_3.price }}));
</script>
{% endblock %}
